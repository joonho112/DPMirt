% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate.R
\name{dpmirt_simulate}
\alias{dpmirt_simulate}
\alias{print.dpmirt_sim}
\title{Simulate IRT response data}
\usage{
dpmirt_simulate(
  n_persons,
  n_items,
  model = c("rasch", "2pl", "3pl"),
  target_rho = 0.8,
  latent_shape = "normal",
  item_source = "irw",
  reliability_metric = c("msem", "info"),
  latent_params = list(),
  item_params = list(),
  M = 10000L,
  seed = NULL,
  use_irtsimrel = TRUE,
  verbose = FALSE,
  ...
)

\method{print}{dpmirt_sim}(x, ...)
}
\arguments{
\item{n_persons}{Integer. Number of persons.}

\item{n_items}{Integer. Number of items.}

\item{model}{Character. IRT model type: \code{"rasch"} or \code{"2pl"}.}

\item{target_rho}{Numeric in (0, 1). Target marginal reliability. Only used
when IRTsimrel is available. Default 0.8.}

\item{latent_shape}{Character. Shape of latent ability distribution.
When using IRTsimrel, supports all 12 shapes: \code{"normal"},
\code{"bimodal"}, \code{"trimodal"}, \code{"multimodal"},
\code{"skew_pos"}, \code{"skew_neg"}, \code{"heavy_tail"},
\code{"light_tail"}, \code{"uniform"}, \code{"floor"},
\code{"ceiling"}, \code{"custom"}.
Fallback supports: \code{"normal"}, \code{"bimodal"}, \code{"skewed"}.}

\item{item_source}{Character. Source for item parameters in IRTsimrel.
One of \code{"irw"} (default), \code{"parametric"},
\code{"hierarchical"}, \code{"custom"}.}

\item{reliability_metric}{Character. Reliability metric for EQC calibration.
\code{"msem"} (default) or \code{"info"}.}

\item{latent_params}{List. Additional parameters passed to
\code{IRTsimrel::sim_latentG()} (e.g.,
\code{list(shape_params = list(delta = 0.8))}).}

\item{item_params}{List. Additional parameters passed to
\code{IRTsimrel::sim_item_params()} (e.g.,
\code{list(discrimination_params = list(rho = -0.3))}).}

\item{M}{Integer. Quadrature sample size for EQC. Default 10000.}

\item{seed}{Integer or NULL. Random seed for reproducibility.}

\item{use_irtsimrel}{Logical. If TRUE (default), attempt to use
IRTsimrel for reliability-targeted simulation. Falls back to internal
simulation if IRTsimrel is not installed.}

\item{verbose}{Logical. Print progress messages. Default FALSE.}

\item{...}{Additional arguments (currently unused).}

\item{x}{A \code{dpmirt_sim} object.}
}
\value{
A \code{dpmirt_sim} S3 object containing:
\describe{
\item{response}{N x I binary response matrix}
\item{theta}{True person abilities (length N)}
\item{beta}{True item difficulties (length I)}
\item{lambda}{True discriminations (length I for 2PL, NULL for Rasch)}
\item{n_persons, n_items, model}{Simulation settings}
\item{reliability}{Achieved marginal reliability}
\item{target_rho}{Requested target reliability (NULL if fallback)}
\item{latent_shape}{Distribution shape used}
\item{eqc_result}{EQC calibration result (NULL if fallback)}
\item{method}{Character: "irtsimrel" or "fallback"}
}
}
\description{
Generates binary response data under known IRT parameters.
When IRTsimrel is available, uses EQC (Empirical Quadrature Calibration)
to achieve a target marginal reliability. Otherwise falls back to
Paganin-style simulation without reliability targeting.
}
\examples{
\dontrun{
# Simple fallback simulation
sim <- dpmirt_simulate(200, 25, model = "rasch", seed = 42)

# With IRTsimrel (reliability-targeted)
sim <- dpmirt_simulate(200, 25, model = "rasch",
                       target_rho = 0.85,
                       latent_shape = "bimodal",
                       seed = 42)

# Full simulation study workflow
sim <- dpmirt_simulate(200, 25, model = "rasch",
                       target_rho = 0.8,
                       latent_shape = "bimodal")
fit <- dpmirt(sim$response, model = "rasch", prior = "dpm")
est <- dpmirt_estimates(fit)
dpmirt_loss(est, true_theta = sim$theta, true_beta = sim$beta)
}

}
\seealso{
\code{\link{dpmirt}}, \code{\link{dpmirt_loss}},
\code{\link{plot.dpmirt_sim}}

Other simulation: 
\code{\link{dpmirt_loss}()}
}
\concept{simulation}
